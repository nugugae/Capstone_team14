# 베이스 이미지 설정
FROM openjdk:11-jdk-slim AS build

# 작업 디렉토리 설정
WORKDIR /workspace/app

# 프로젝트의 모든 파일을 작업 디렉토리로 복사
COPY . .

# Gradle 빌드 실행
RUN ./gradlew clean build

# 새로운 베이스 이미지 설정
FROM openjdk:11-jdk-slim

# 애플리케이션에 필요한 리소스를 복사
COPY --from=build /workspace/app/build/libs/*.jar app.jar

# 애플리케이션 실행
ENTRYPOINT ["java","-jar","/app.jar"]
